<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1 Test: Math Foundations (Set 2)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- MathJax for rendering LaTeX -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .question-card {
            transition: box-shadow 0.3s ease-in-out;
        }
        .option-label {
            transition: background-color 0.2s ease-in-out;
        }
        .correct-answer {
            background-color: #d1fae5; /* Light green */
            border-color: #10b981; /* Green */
        }
        .incorrect-answer {
            background-color: #fee2e2; /* Light red */
            border-color: #ef4444; /* Red */
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center items-center py-4">
                <h1 class="text-2xl font-bold text-slate-900">Unit 1 Test: Whole Number Foundations (Set 2)</h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-3xl font-bold text-teal-700 mb-2">Test Your Knowledge</h2>
            <p class="text-slate-600">This test covers the concepts from Days 1-4: Place Value, Estimation, Fact Families, and Order of Operations. Choose the best answer for each question and check your results.</p>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-6">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <!-- Score & Reset Container -->
        <div id="score-container" class="mt-8 text-center hidden">
             <div class="bg-white p-6 rounded-xl shadow-lg">
                 <h2 class="text-2xl font-bold text-slate-800 mb-2">Test Complete!</h2>
                 <p class="text-4xl font-bold text-teal-600 mb-4" id="score-text"></p>
                 <p class="text-slate-600 mb-6" id="score-message"></p>
                 <button id="reset-btn" class="bg-teal-600 text-white font-semibold px-6 py-2 rounded-lg hover:bg-teal-700 transition-colors">
                     Try Again
                 </button>
             </div>
        </div>
    </main>

    <footer class="text-center my-12 text-gray-500 text-sm">
        <p>&copy; 2025 Aly Hatfield. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const quizContainer = document.getElementById('quiz-container');
            const scoreContainer = document.getElementById('score-container');
            const scoreText = document.getElementById('score-text');
            const scoreMessage = document.getElementById('score-message');
            const resetButton = document.getElementById('reset-btn');

            let score = 0;
            let questionsAnswered = 0;

            const quizData = [
                {
                    topic: "Day 1: Place Value",
                    question: "In the number 195,382, what is the value of the digit 9?",
                    options: ["900", "9,000", "90,000", "900,000"],
                    answer: "90,000",
                    rationale: "The digit 9 is in the ten thousands place, giving it a value of ninety thousand."
                },
                {
                    topic: "Day 1: Place Value",
                    question: "What is the standard form of seventy-three thousand, four hundred five?",
                    options: ["73,450", "7,345", "73,045", "73,405"],
                    answer: "73,405",
                    rationale: "This correctly places 73 in the thousands period, 4 in the hundreds place, a 0 placeholder in the tens place, and 5 in the ones place."
                },
                {
                    topic: "Day 2: Estimation",
                    question: "Estimate the difference of $817 - 389$ by rounding each number to the nearest hundred.",
                    options: ["400", "500", "430", "428"],
                    answer: "400",
                    rationale: "817 rounds down to 800 and 389 rounds up to 400. The difference is $800 - 400 = 400$."
                },
                {
                    topic: "Day 2: Estimation",
                    question: "A library has 523 fiction books and 378 non-fiction books. Estimate the total number of books by rounding to the nearest ten.",
                    options: ["900", "910", "890", "901"],
                    answer: "900",
                    rationale: "523 rounds down to 520, and 378 rounds up to 380. The sum is $520 + 380 = 900$."
                },
                {
                    topic: "Day 3: Fact Families",
                    question: "Which equation does NOT belong to the fact family for the numbers 7, 9, and 63?",
                    options: ["$63 \\div 9 = 7$", "$9 \\times 7 = 63$", "$63 - 9 = 54$", "$63 \\div 7 = 9$"],
                    answer: "$63 - 9 = 54$",
                    rationale: "This equation uses subtraction, which is not part of a multiplication and division fact family."
                },
                {
                    topic: "Day 3: Fact Families",
                    question: "If you know that $56 \\div 8 = 7$, which multiplication fact must also be true?",
                    options: ["$56 \\times 7 = 392$", "$8 \\times 7 = 56$", "$56 \\times 8 = 448$", "$8 \\div 56 = 7$"],
                    answer: "$8 \\times 7 = 56$",
                    rationale: "Division and multiplication are inverse operations. If $56 \\div 8 = 7$, then $8 \\times 7 = 56$."
                },
                {
                    topic: "Day 4: Order of Operations",
                    question: "Solve the following expression: $20 - 8 \\div 4$.",
                    options: ["3", "18", "12", "5"],
                    answer: "18",
                    rationale: "First, divide $8 \\div 4 = 2$. Then, subtract $20 - 2 = 18$."
                },
                {
                    topic: "Day 4: Order of Operations",
                    question: "Solve using the order of operations: $(4 + 6) \\times 5$.",
                    options: ["50", "46", "34", "24"],
                    answer: "50",
                    rationale: "First, solve the operation in the parentheses $4 + 6 = 10$. Then, multiply $10 \\times 5 = 50$."
                },
                {
                    topic: "Day 4: Order of Operations",
                    question: "Solve the following expression: $3 + 2 \\times 6 \\div 3$.",
                    options: ["7", "10", "5", "8"],
                    answer: "7",
                    rationale: "Multiplication and division are done left to right ($2 \\times 6 = 12$, then $12 \\div 3 = 4$), followed by addition ($3 + 4 = 7$)."
                },
                {
                    topic: "Day 1: Place Value",
                    question: "What is the standard form of $600,000 + 5,000 + 20 + 7$?",
                    options: ["65,270", "605,027", "650,207", "605,270"],
                    answer: "605,027",
                    rationale: "This correctly combines the values, using zeros as placeholders for the empty ten thousands and hundreds places."
                }
            ];

            // Shuffle questions to make it different each time
            quizData.sort(() => Math.random() - 0.5);

            function buildQuiz() {
                quizData.forEach((data, index) => {
                    const questionCard = document.createElement('div');
                    questionCard.className = 'bg-white p-6 rounded-xl shadow-lg question-card';

                    let optionsHTML = '';
                    // Shuffle options for each question
                    const shuffledOptions = [...data.options].sort(() => Math.random() - 0.5);
                    shuffledOptions.forEach(option => {
                        optionsHTML += `
                            <div>
                                <label class="option-label block w-full text-left p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-100 cursor-pointer">
                                    <input type="radio" name="question${index}" value="${option}" class="mr-3">
                                    <span>${option}</span>
                                </label>
                            </div>
                        `;
                    });

                    questionCard.innerHTML = `
                        <div class="flex justify-between items-start mb-4">
                             <h3 class="text-lg font-semibold text-slate-800"><span class="font-bold text-teal-600">${index + 1}.</span> ${data.question}</h3>
                             <span class="text-xs font-semibold bg-teal-100 text-teal-800 px-2 py-1 rounded-full">${data.topic}</span>
                        </div>
                        <div class="space-y-3 mb-4">${optionsHTML}</div>
                        <div class="flex items-center justify-end">
                             <div class="feedback-container mr-4 text-sm font-medium h-6"></div>
                             <button class="check-btn bg-slate-200 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors" data-index="${index}">Check Answer</button>
                        </div>
                    `;
                    quizContainer.appendChild(questionCard);
                });
                // Rerender math equations after adding them to the DOM
                if (window.MathJax) {
                    window.MathJax.typesetPromise();
                }
            }

            function checkAnswer(event) {
                const checkButton = event.target;
                const questionIndex = checkButton.dataset.index;
                const questionData = quizData[questionIndex];
                const questionCard = checkButton.closest('.question-card');
                const selectedOption = questionCard.querySelector(`input[name="question${questionIndex}"]:checked`);
                const feedbackContainer = questionCard.querySelector('.feedback-container');

                if (!selectedOption) {
                    feedbackContainer.textContent = "Please select an answer.";
                    feedbackContainer.className = 'feedback-container mr-4 text-sm font-medium h-6 text-red-600';
                    return;
                }

                checkButton.disabled = true;
                checkButton.classList.remove('hover:bg-slate-300');
                checkButton.classList.add('opacity-50', 'cursor-not-allowed');

                const userAnswer = selectedOption.value;
                const labels = questionCard.querySelectorAll('.option-label');

                labels.forEach(label => {
                    const input = label.querySelector('input');
                    input.disabled = true;
                    if (input.value === questionData.answer) {
                        label.classList.add('correct-answer');
                    } else if (input.checked) {
                        label.classList.add('incorrect-answer');
                    }
                });

                if (userAnswer === questionData.answer) {
                    score++;
                    feedbackContainer.innerHTML = `<span class="text-green-600 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg> Correct!</span>`;
                } else {
                    feedbackContainer.innerHTML = `<span class="text-red-600 flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg> Incorrect.</span>`;
                }

                // Add rationale after a short delay
                setTimeout(() => {
                     const rationaleSpan = document.createElement('span');
                     rationaleSpan.className = 'ml-2 text-slate-600';
                     rationaleSpan.innerHTML = questionData.rationale;
                     feedbackContainer.appendChild(rationaleSpan);
                     if (window.MathJax) {
                         window.MathJax.typesetPromise([rationaleSpan]);
                     }
                }, 500);

                questionsAnswered++;
                if(questionsAnswered === quizData.length) {
                    showScore();
                }
            }

            function showScore() {
                const percentage = Math.round((score / quizData.length) * 100);
                scoreText.textContent = `${score} / ${quizData.length} (${percentage}%)`;
                let message = "";
                if (percentage === 100) {
                    message = "Perfect score! You've mastered these concepts!";
                } else if (percentage >= 80) {
                    message = "Great job! You have a strong understanding of this unit.";
                } else if (percentage >= 60) {
                    message = "Good effort! A little more review will make a big difference.";
                } else {
                    message = "Don't give up! Reviewing the notes and trying again is a great idea.";
                }
                scoreMessage.textContent = message;
                scoreContainer.classList.remove('hidden');
                scoreContainer.scrollIntoView({ behavior: 'smooth' });
            }

            function resetQuiz() {
                score = 0;
                questionsAnswered = 0;
                scoreContainer.classList.add('hidden');
                quizContainer.innerHTML = '';
                // Re-shuffle and build
                quizData.sort(() => Math.random() - 0.5);
                buildQuiz();
                // Re-add event listener after rebuilding the quiz
                quizContainer.addEventListener('click', (event) => {
                    if (event.target.classList.contains('check-btn')) {
                        checkAnswer(event);
                    }
                });
            }

            // Initial setup
            buildQuiz();

            // Event Delegation for check buttons
            quizContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('check-btn')) {
                    checkAnswer(event);
                }
            });

            // Event listener for reset button
            resetButton.addEventListener('click', resetQuiz);
        });
    </script>
</body>
</html>
